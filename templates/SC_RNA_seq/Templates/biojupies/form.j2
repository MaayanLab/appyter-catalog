{% extends "biojupies/base.j2" %}

{% block body %}
{{ super() }}
<div class="container">
  <form method="POST" enctype="multipart/form-data">
      {{ SectionField(
        name="_primary",
        section=null,
        title="Single cell RNA-seq analysis pipeline",
        subtitle="This pipeline enables you to analyze and visualize your single cell RNA sequencing datasets with an array of algorithms and data visualization methods. The pipeline includes PCA analysis, MAGIC normalization, K-means clustering, enrichment analysis, Monocle trajectory inference, SingleR cell type prediction, and library size analysis.",
      ).render(_fields=_fields) }}
      {% for _field in _fields %}
          {% if _field.type == "section" %}
            {{ _field.render(_fields=_fields) }}
          {% endif %}
      {% endfor %}
      <input name="_session" type="text" style="display: none;" value="{{ _session }}" />
      <div class="col-sm-12">
        &nbsp;
      </div>
      <div class="col-sm-12 text-center">
        <input
          class="btn navigate white border-custom bg-blue nodecoration"
          type="submit"
          value="Submit"
        />
      </div>
  </form>
</div>
{% endblock %}

{% block script %}
{{ super() }}
<script>
$(document).ready(function() {
  $('form').submit(function (e) {
    e.preventDefault();
    // Replace files with text elements
    $('form [type="file"]').each(function () {
      $(this).attr('type', 'text')
    })
    // Submit form
    this.submit()
  })
})
</script>
{% endblock %}